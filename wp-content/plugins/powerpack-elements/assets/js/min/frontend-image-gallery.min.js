!function(d){d(window).on("elementor/frontend/init",()=>{class e extends elementorModules.frontend.handlers.Base{getDefaultSettings(){return{selectors:{container:".pp-image-gallery-container",gallery:".pp-image-gallery",justifiedGallery:".pp-image-gallery-justified",filterItems:".pp-gallery-filter"}}}getDefaultElements(){var e=this.getSettings("selectors");return{$container:this.$element.find(e.container),$gallery:this.$element.find(e.gallery),$justifiedGallery:this.$element.find(e.justifiedGallery),$filterItems:this.$element.find(e.filterItems)}}bindEvents(){var e=this.elements.$container.data("settings"),t=this.elements.$gallery;elementorFrontend.isEditMode()||((t.hasClass("pp-image-gallery-masonry")||t.hasClass("pp-image-gallery-filter-enabled"))&&this.initMasonryLayout(t),t.hasClass("pp-image-gallery-filter-enabled")&&this.initFilters(t,e),"yes"===e.pagination&&this.initLoadMore(t,e,[],[])),"yes"===e.tilt_enable&&this.initTilt(),"justified"===e.layout&&this.initjustifiedLayout(),this.initLightbox()}initMasonryLayout(e){var t=e.hasClass("pp-image-gallery-masonry")?"masonry":"fitRows",i=this.elements.$filterItems;let a="",n=(d(i).each(function(){""!==a&&a!==undefined||(a=d(this).attr("data-default"))}),{itemSelector:".pp-grid-item-wrap",layoutMode:t,percentPosition:!0,filter:a});this.elements.$container.imagesLoaded(function(){e.isotope(n),e.find(".pp-gallery-slide-image").on("load",function(){d(this).hasClass("lazyloaded")||setTimeout(function(){e.isotope("layout")},500)})}),elementorFrontend.elements.$window.on("elementor-pro/motion-fx/recalc",function(){e.isotope("layout")})}initFilters(n,l){const s=this.getID(),o=this.getElementSettings("lightbox_library"),r=this;this.elements.$container.on("click",".pp-gallery-filter",function(){let e=d(this),t=e.attr("data-filter"),i=e.attr("data-gallery-index"),a=n.find(t);"*"===t&&(a=n.find(".pp-grid-item-wrap")),d(a).each(function(){var e=d(this).find(".pp-image-gallery-item-link");"fancybox"===o?e.attr("data-fancybox",i+"_"+s):e.attr("data-elementor-lightbox-slideshow",i+"_"+s)}),e.siblings().removeClass("pp-active"),e.addClass("pp-active"),"justified"===l.layout?r.initjustifiedLayout(t):n.isotope({filter:t})}),d(".pp-filters-dropdown").on("change",function(){let e=this.value,t=d(this).find(":selected").attr("data-gallery-index"),i=n.find(e);"*"===e&&(i=n.find(".pp-grid-item-wrap")),d(i).each(function(){var e=d(this).find(".pp-image-gallery-item-link");"fancybox"===o?e.attr("data-fancybox",t+"_"+s):e.attr("data-elementor-lightbox-slideshow",t+"_"+s)}),n.isotope({filter:e})}),this.hashChange(),d(window).on("hashchange",function(){this.hashChange()}.bind(this))}initjustifiedLayout(e){const t=this.elements.$container.data("settings"),i=this.elements.$justifiedGallery;let a={rowHeight:t.row_height,lastRow:t.last_row,selector:"div",waitThumbnailsLoad:!0,margins:t.image_spacing,border:0};e&&(a.filter=e),i.imagesLoaded(function(){i.justifiedGallery(a).on("jg.complete jg.resize",function(e){var t=d(this).data("jg.controller");0===t.rows&&"hide"===t.settings.lastRow&&(a.lastRow="justify",d(this).justifiedGallery(a))})}.bind(this))}initLoadMore(e,t,i,a){const n=this;e.find(".pp-grid-item-wrap").each(function(){a.push(d(this).data("item-id"))}),this.elements.$container.find(".pp-gallery-load-more").off("click").on("click",function(e){e.preventDefault(),d(this).addClass("disabled pp-loading"),0<i.length?n.renderGalleryItems(i,a):n.getAjaxPhotos(i,a,t)})}getAjaxPhotos(t,i,e){const a=this;e={action:"pp_gallery_get_images",pp_action:"pp_gallery_get_images",settings:e};d.ajax({type:"post",url:window.location.href.split("#").shift(),context:this,data:e,success:function(e){e.success&&((e=e.data.items)&&d(e).each(function(){d(this).hasClass("pp-grid-item-wrap")&&t.push(this)}),a.renderGalleryItems(t,i))},error:function(e,t){console.log(t)}})}renderGalleryItems(e,a){const n=this.elements.$container.data("settings"),l=this.elements.$gallery,s=l.attr("id"),o=this.elements.$justifiedGallery,r=this;if(this.elements.$container.find(".pp-gallery-load-more").removeClass("disabled pp-loading"),0<e.length){let t=1,i=[];d(e).each(function(){var e=d(this).data("item-id");if(-1===d.inArray(e,a)){if(!(t<=parseInt(n.per_page,10)))return!1;a.push(e),i.push(this),t++}}),0<i.length&&(i=d(i)).imagesLoaded(function(){"justified"!=n.layout&&(l.isotope("insert",i),setTimeout(function(){l.isotope("layout")},500)),"justified"===n.layout&&0<o.length&&(l.append(i.fadeIn()),o.imagesLoaded(function(){}).done(function(e){setTimeout(function(){o.justifiedGallery("norewind")},200)})),"yes"===n.tilt_enable&&r.initTilt()}),e.length===a.length&&this.elements.$container.find(".pp-gallery-pagination").hide();e='.pp-grid-item-wrap .pp-image-gallery-item-link[data-fancybox="'+s+'"]';0<d(e).length&&d(e).fancybox({loop:!0})}}hashChange(){setTimeout(function(){location.hash&&0<d(location.hash).length&&d(location.hash).parent().hasClass("pp-gallery-filters")&&d(location.hash).trigger("click")},500)}initLightbox(){var e='.pp-grid-item-wrap .pp-image-gallery-item-link[data-fancybox="'+this.elements.$gallery.attr("id")+'"]',t=this.elements.$gallery.data("fancybox-settings");0<d(e).length&&d(e).fancybox(t)}initTilt(){var e=this.elements.$container.data("settings"),t=this.elements.$gallery;d(t).find(".pp-image-gallery-thumbnail-wrap").tilt({disableAxis:e.tilt_axis,maxTilt:e.tilt_amount,scale:e.tilt_scale,speed:e.tilt_speed,perspective:1e3})}}elementorFrontend.elementsHandler.attachHandler("pp-image-gallery",e)})}(jQuery);